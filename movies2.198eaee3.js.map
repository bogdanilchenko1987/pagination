{"mappings":"AAIA,MAIMA,EAAOC,SAASC,cAAc,YAC9BC,EAASF,SAASC,cAAc,aACtC,IAAIE,EAAc,IAQdC,EAAW,IAAIC,sBAEnB,SAAuBC,EAASC,GAC9BD,EAAQE,SAAQC,IACVA,EAAMC,iBACRP,GAAe,EACfQ,EAAYR,GACTS,MAAKC,IACJd,EAAKe,mBAAmB,YAAaC,EAAaF,EAAKG,UACrC,MAAdH,EAAKI,MACPV,EAASW,UAAUhB,EAAO,IAG7BiB,OAAMC,GAAOC,QAAQC,IAAIF,K,MAnBpB,CACZG,KAAM,KACNC,WAAY,QACZC,UAAW,IAqBb,SAASV,EAAaW,GACpB,OAAOA,EACJC,KACC,EAACC,YAAEA,EAAWC,MAAEA,KACd,0DAC2CD,WAAqBC,wBACtDA,0BAGbC,KAAK,G,CAGV,SAASnB,EAAYM,EAAO,GAC1B,OAAOc,MAAM,iGAAmDd,KAAQL,MACtEoB,IACE,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,YAG3B,OAAOH,EAASI,MAAM,G,CAM5BzB,IACGC,MAAKC,IACJd,EAAKe,mBAAmB,YAAaC,EAAaF,EAAKG,UACvDZ,EAASiC,QAAQnC,EAAO,IAEzBiB,OAAMC,GAAOC,QAAQC,IAAIF","sources":["src/js/movies2.js"],"sourcesContent":["// https://api.themoviedb.org/3/trending/movie/\n// https://image.tmdb.org/t/p/w500/1E5baAaEse26fej7uHcjOgEE2t2.jpg\nimport '../css/common.css';\n\nconst BASE_URL = 'https://api.themoviedb.org/3/';\nconst END_POINT = 'trending/movie/day';\nconst API_KEY = '14d9418a13ba1f50c8b95263b7df6dda';\n// ---------\nconst list = document.querySelector('.js-list');\nconst target = document.querySelector('.js-guard');\nlet currentPage = 498;\n\nlet options = {\n  root: null,\n  rootMargin: '300px',\n  threshold: 1.0,\n};\n\nlet observer = new IntersectionObserver(onInfinitLoad, options);\n\nfunction onInfinitLoad(entries, observer) {\n  entries.forEach(entry => {\n    if (entry.isIntersecting) {\n      currentPage += 1;\n      getTrending(currentPage)\n        .then(data => {\n          list.insertAdjacentHTML('beforeend', createMarkup(data.results));\n          if (data.page === 500) {\n            observer.unobserve(target);\n          }\n        })\n        .catch(err => console.log(err));\n    }\n  });\n}\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({ poster_path, title }) =>\n        `<li>\n        <img src=\"https://image.tmdb.org/t/p/w300${poster_path}\" alt=\"${title}\">\n            <h2>${title}</h2>\n        </li>`\n    )\n    .join('');\n}\n\nfunction getTrending(page = 1) {\n  return fetch(`${BASE_URL}${END_POINT}?api_key=${API_KEY}&page=${page}`).then(\n    response => {\n      if (!response.ok) {\n        throw new Error(response.statusText);\n      }\n\n      return response.json();\n    }\n  );\n}\n\n// якщо параметр не вказаний, то тут дефолтне значення page=1\ngetTrending()\n  .then(data => {\n    list.insertAdjacentHTML('beforeend', createMarkup(data.results));\n    observer.observe(target);\n  })\n  .catch(err => console.log(err));\n"],"names":["$970f562eb6b3f00e$var$list","document","querySelector","$970f562eb6b3f00e$var$target","$970f562eb6b3f00e$var$currentPage","$970f562eb6b3f00e$var$observer","IntersectionObserver","entries","observer1","forEach","entry","isIntersecting","$970f562eb6b3f00e$var$getTrending","then","data","insertAdjacentHTML","$970f562eb6b3f00e$var$createMarkup","results","page","unobserve","catch","err","console","log","root","rootMargin","threshold","arr","map","poster_path","title","join","fetch","response","ok","Error","statusText","json","observe"],"version":3,"file":"movies2.198eaee3.js.map"}