{"mappings":"YAIA,IAAMA,EAAW,gCACXC,EAAY,qBACZC,EAAU,mCACVC,EAAOC,SAASC,cAAc,YAC9BC,EAAcF,SAASC,cAAc,WACvCE,EAAc,IAiBlB,SAASC,I,IAAYC,EAAAC,UAAAC,OAAA,YAAAD,UAAA,GAAQA,UAAA,GAAD,EAC1B,OAAOE,MAAM,GAAcC,OAAXb,GAAgCa,OAArBZ,EAAU,aAA2BY,OAAhBX,EAAQ,UAAaW,OAALJ,IAAQK,MACtE,SAAAC,GACE,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,YAG3B,OAAOH,EAASI,M,IAetB,SAASC,EAAaC,GACpB,OAAOA,EACJC,KACC,SAAAC,G,IAAGC,EAAWD,EAAXC,YAAaC,EAAKF,EAALE,M,MACd,0DACgEZ,OAArBW,EAAY,WAC7CX,OADsDY,EAAM,wBACtDZ,OAANY,EAAM,uB,IAGnBC,KAAK,G,CA9CVpB,EAAYqB,iBAAiB,SAE7B,WAEEnB,EADAD,GAAe,GAEZO,MAAK,SAAAc,GACJC,QAAQC,IAAIF,EAAKnB,MACjBN,EAAK4B,mBAAmB,YAAaX,EAAaQ,EAAKI,UACrC,MAAdJ,EAAKnB,OACPH,EAAY2B,QAAS,E,IAGxBC,OAAM,SAAAC,G,OAAON,QAAQC,IAAIK,E,OAgB9B3B,IACGM,MAAK,SAAAc,GACJzB,EAAK4B,mBAAmB,YAAaX,EAAaQ,EAAKI,UACnDJ,EAAKnB,OAASmB,EAAKQ,cACrB9B,EAAY2B,QAAS,E,IAGxBC,OAAM,SAAAC,G,OAAON,QAAQC,IAAIK,E","sources":["src/js/movies.js"],"sourcesContent":["// https://api.themoviedb.org/3/trending/movie/\n// https://image.tmdb.org/t/p/w500/1E5baAaEse26fej7uHcjOgEE2t2.jpg\nimport '../css/common.css';\n\nconst BASE_URL = 'https://api.themoviedb.org/3/';\nconst END_POINT = 'trending/movie/day';\nconst API_KEY = '14d9418a13ba1f50c8b95263b7df6dda';\nconst list = document.querySelector('.js-list');\nconst loadMoreBtn = document.querySelector('.js-btn');\nlet currentPage = 497;\n\nloadMoreBtn.addEventListener('click', onLoad);\n\nfunction onLoad() {\n  currentPage += 1;\n  getTrending(currentPage)\n    .then(data => {\n      console.log(data.page);\n      list.insertAdjacentHTML('beforeend', createMarkup(data.results));\n      if (data.page === 500) {\n        loadMoreBtn.hidden = true;\n      }\n    })\n    .catch(err => console.log(err));\n}\n\nfunction getTrending(page = 1) {\n  return fetch(`${BASE_URL}${END_POINT}?api_key=${API_KEY}&page=${page}`).then(\n    response => {\n      if (!response.ok) {\n        throw new Error(response.statusText);\n      }\n\n      return response.json();\n    }\n  );\n}\n\n// якщо параметр не вказаний, то тут дефолтне значення page=1\ngetTrending()\n  .then(data => {\n    list.insertAdjacentHTML('beforeend', createMarkup(data.results));\n    if (data.page !== data.total_pages) {\n      loadMoreBtn.hidden = false;\n    }\n  })\n  .catch(err => console.log(err));\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({ poster_path, title }) =>\n        `<li>\n        <img src=\"https://image.tmdb.org/t/p/w400${poster_path}\" alt=\"${title}\">\n            <h2>${title}</h2>\n        </li>`\n    )\n    .join('');\n}\n"],"names":["$3336333d54cdc52e$var$BASE_URL","$3336333d54cdc52e$var$END_POINT","$3336333d54cdc52e$var$API_KEY","$3336333d54cdc52e$var$list","document","querySelector","$3336333d54cdc52e$var$loadMoreBtn","$3336333d54cdc52e$var$currentPage","$3336333d54cdc52e$var$getTrending","page","arguments","length","fetch","concat","then","response","ok","Error","statusText","json","$3336333d54cdc52e$var$createMarkup","arr","map","param","poster_path","title","join","addEventListener","data","console","log","insertAdjacentHTML","results","hidden","catch","err","total_pages"],"version":3,"file":"movies.e4e4063e.js.map"}